<ng-template #default let-index>
  <div *ngFor="let element of itemElements()">
    <ice-element *ngIf="element" [section]="section" [elementName]="element.name" [index]="index">
    </ice-element>
  </div>
</ng-template>

<div class="insis-array" *ngIf="isVisible">
  <div *ngFor="let item of getItems(); index as index" class="insis-array-item">
    <div>
      <label *ngIf="label">{{ label }} {{ getIndexOfArrayItem(index) }}</label>
      <button
        *ngIf="canRemove() && showRemoveButton()"
        mat-button
        color="primary"
        (click)="deleteItem(index)"
      >
        {{ removeLabel }}
      </button>
      <ng-container
        [ngTemplateOutlet]="template"
        [ngTemplateOutletContext]="{ $implicit: childIndex(index) }"
      >
      </ng-container>
    </div>
  </div>
  <button *ngIf="canAdd()" mat-button color="primary" (click)="addItem()">{{ addLabel }}</button>
  <mat-error *ngFor="let message of validation?.getMessagesFor(element.name, index)">
    {{ message }}
  </mat-error>
</div>
