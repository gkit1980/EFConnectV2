@import '~@angular/material/theming';

@mixin stepper-navigation-mixin($theme) {
  $primary: map-get($theme, primary);
  $primaryColor: mat-color($primary);
  $activePageTitleBarBackgroundColor: rgba($primaryColor, 0.117);
  $lineColorBetweenFutureNodes: rgba(0, 0, 0, 0.4);

  $circleLeftPadding: 10px;
  $circleDiameter: 24px;

  .stepper-navigation {
    .stepper-num {
      width: $circleDiameter;
      height: $circleDiameter;
      position: absolute;
      top: 50%;
      left: $circleLeftPadding;
      margin-top: -($circleDiameter / 2);
      border-radius: 50%;
      border: 1px solid #ccc;
      text-align: center;
      line-height: 1.9em;
      font-size: 0.8em;
      background: #fff;

      &.past {
        color: white;
        background: $primaryColor;
        border-color: $primaryColor;
      }
    }

    .stepper-header {
      width: 100%;
      text-align: left;
      position: relative;
      padding: 15px 15px 15px (30px + $circleLeftPadding);
      cursor: pointer;

      &:before,
      &:after {
        display: block;
        width: 2px;
        position: absolute;
        content: '';
        left: 11px + $circleLeftPadding;
        background: $lineColorBetweenFutureNodes;
      }

      &:before {
        top: 0;
        bottom: calc(50% - 12px);
      }
      &:after {
        bottom: 0;
        top: calc(50% + 12px);
      }

      &.active {
        color: $primaryColor;
        background-color: $activePageTitleBarBackgroundColor;

        > .stepper-num {
          border-color: $primaryColor;
        }

        &:before {
          background: $primaryColor;
        }
      }

      &.past {
        color: black;

        &:before,
        &:after {
          background: $primaryColor;
        }
      }

      &.first:before,
      &.last:after {
        display: none;
      }
    }

    .stepper-content {
      position: relative;
      max-height: 0;
      overflow: hidden;
      transform-origin: 0 0;

      &.active {
        padding: 15px 15px 15px 45px;
        max-height: 99999px;
      }

      &:before {
        display: block;
        width: 2px;
        background: $lineColorBetweenFutureNodes;
        position: absolute;
        content: '';
        left: 11px + $circleLeftPadding;
        top: 0;
        bottom: 0;
      }

      &.last:before {
        display: none;
      }
    }
  }

  @keyframes make-me-primary-bg {
    to {
      background: $primaryColor;
    }
  }
}
