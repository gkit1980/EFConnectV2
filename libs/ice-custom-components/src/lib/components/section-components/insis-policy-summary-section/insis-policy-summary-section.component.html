<section class="insis-policy-summary-section card" [ngClass]="css">
  <h2 *ngIf="label">
    {{ label }}
  </h2>
  <div fxLayout="row wrap" fxLayoutAlign="start start">
    <div
      fxFlex="{{ fxFlexValue }}"
      fxFlex.xs="100%"
      *ngIf="getElementValue('policy.contract.begin')"
      class="u-mb-4"
    >
      <div class="label mat-caption">
        {{ getElementLabel('policy.contract.begin') }}
      </div>
      <div class="value">
        {{ getElementValue('policy.contract.begin') }}
      </div>
    </div>

    <div
      fxFlex="{{ fxFlexValue }}"
      fxFlex.xs="100%"
      *ngIf="getElementValue('policy.contract.term.duration')"
      class="u-mb-4"
    >
      <div class="label mat-caption">
        {{ getElementLabel('policy.contract.term.duration') }}
      </div>
      <div class="value">
        {{ getElementValue('policy.contract.term.duration') }}
      </div>
    </div>

    <div
      fxFlex="{{ fxFlexValue }}"
      fxFlex.xs="100%"
      *ngIf="getElementValue('policy.contract.payment.term.duration')"
      class="u-mb-4"
    >
      <div class="label mat-caption">
        {{ getElementLabel('policy.contract.payment.term.duration') }}
      </div>
      <div class="value">
        {{ getElementValue('policy.contract.payment.term.duration') }}
      </div>
    </div>

    <div
      fxFlex="{{ fxFlexValue }}"
      fxFlex.xs="100%"
      *ngIf="getElementValue('policy.contract.payment.frequency')"
      class="u-mb-4"
    >
      <div class="label mat-caption">
        {{ getElementLabel('policy.contract.payment.frequency') }}
      </div>
      <div class="value">
        {{ getElementValue('policy.contract.payment.frequency') }}
      </div>
    </div>

    <ng-container *ngIf="type === 'motor'">
      <ng-container
        *ngFor="let elIndex of getArrayElementIndexes('policy.insured.vehicle-objects')"
      >
        <div
          fxFlex="{{ fxFlexValue }}"
          fxFlex.xs="100%"
          class="u-mb-4"
          *ngIf="getElementValue('policy.insured.vehicle-objects~car.brand', [elIndex])"
        >
          <div class="label mat-caption">
            {{ getElementValue('policy.insured.vehicle-objects~car.brand', [elIndex]) }}
            {{ getElementValue('policy.insured.vehicle-objects~car.model', [elIndex]) }},
            {{ getElementValue('policy.insured.vehicle-objects~car.construction-date', [elIndex]) }}
          </div>
          <div class="value">
            {{ getElementValue('policy.insured.vehicle-objects~car.regno', [elIndex]) }}
          </div>
        </div>
      </ng-container>

      <ng-container
        *ngFor="let objectIndex of getArrayElementIndexes('policy.insured.vehicle-objects')"
      >
        <ng-container
          *ngFor="
            let driverIndex of getArrayElementIndexes('policy.insured.vehicle-objects~drivers')
          "
        >
          <div
            fxFlex="{{ fxFlexValue }}"
            fxFlex.xs="100%"
            class="u-mb-4"
            *ngIf="
              getElementValue('policy.insured.vehicle-objects~drivers~person.first-name', [
                objectIndex,
                driverIndex
              ])
            "
          >
            <div class="label mat-caption">Driver</div>
            <div class="value">
              {{
                getElementValue('policy.insured.vehicle-objects~drivers~person.first-name', [
                  objectIndex,
                  driverIndex
                ])
              }}
              {{
                getElementValue('policy.insured.vehicle-objects~drivers~person.last-name', [
                  objectIndex,
                  driverIndex
                ])
              }}
            </div>
          </div>
        </ng-container>
      </ng-container>
    </ng-container>

    <div
      fxFlex="{{ fxFlexValue }}"
      fxFlex.xs="100%"
      *ngIf="getElementValue('policy.participants.holder.person.full-name')"
      class="u-mb-4"
    >
      <div class="label mat-caption">
        {{ getElementLabel('policy.participants.holder.person.full-name') }}
      </div>
      <div class="value">
        {{ getElementValue('policy.participants.holder.person.full-name') }}
      </div>
    </div>

    <ng-container *ngIf="type == 'life'">
      <ng-container *ngFor="let elIndex of getArrayElementIndexes('policy.insured.person-objects')">
        <div fxFlex="{{ fxFlexValue }}" fxFlex.xs="100%" class="u-mb-4">
          <div class="label mat-caption">
            {{
              getElementValue('policy.insured.person-objects~entity-accident-insured.type', [
                elIndex
              ])
            }}
          </div>
          <div class="value">
            {{ getElementValue('policy.insured.person-objects~person.first-name', [elIndex]) }}
            {{ getElementValue('policy.insured.person-objects~person.last-name', [elIndex]) }}
          </div>
        </div>
      </ng-container>
    </ng-container>

    <div
      fxFlex="{{ fxFlexValue }}"
      fxFlex.xs="100%"
      *ngIf="getElementValue('policy.participants.payor.iban')"
      class="u-mb-4"
    >
      <div class="label mat-caption">
        {{ getElementLabel('policy.participants.payor.iban') }}
      </div>
      <div class="value">
        {{ formatIBAN(getElementValue('policy.participants.payor.iban')) }}
      </div>
    </div>
  </div>
</section>
