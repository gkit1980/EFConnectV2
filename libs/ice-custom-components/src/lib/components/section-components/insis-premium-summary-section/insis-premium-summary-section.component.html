<details *ngIf="isVisible" class="card u-mb-4" [attr.open]="expanded ? true : null" [ngClass]="css">
  <summary fxLayout="column" fxLayoutAlign="space-between center" class="premium-amount">
    <div fxLayout="row">
      <span>{{ premiumAmount || '0' | currency: currencyISOCode:'code':'1.2-2':locale }}</span>
      <ng-container *ngIf="paymentFrequencyLabelElementName">
        <span>/</span>
        <span>
          <ice-element
            [section]="section"
            [elementName]="paymentFrequencyLabelElementName"
          ></ice-element>
        </span>
      </ng-container>
      <ice-element
        *ngIf="printButtonElementName"
        [section]="section"
        [elementName]="printButtonElementName"
      >
      </ice-element>
    </div>
    <!-- <div fxLayout="row">
      <span class="mat-body-1"
        >{{
          premiumAmountTotal || '0' | currency: currencyISOCode:'code':'1.2-2':locale
        }}
        (total)</span
      >
    </div> -->
  </summary>
  <div>
    <div class="insis-summary-section-detail-container">
      <h3 class="mat-body-2">{{ getLabel(premiumCategoryTitleResourceKey) }}</h3>
      <ul>
        <ng-container *ngFor="let element of premiumElements">
          <li
            *ngIf="!isArrayItemElement(element) && elementValueIsNotZero(element)"
            class="mat-body-3"
          >
            <ice-element [section]="section" [elementName]="element"></ice-element>
          </li>
          <ng-container *ngIf="isArrayItemElement(element)">
            <li *ngFor="let item of getArrayItems(element)" class="mat-body-3">
              <ice-element
                *ngIf="item.isVisible"
                [section]="section"
                [elementName]="element"
                [index]="item.index"
              >
              </ice-element>
            </li>
          </ng-container>
        </ng-container>
      </ul>
    </div>
    <div class="insis-summary-section-detail-container">
      <h3 class="mat-body-2">{{ getLabel(taxesAndFeesCategoryTitleResourceKey) }}</h3>
      <ul>
        <ng-container *ngFor="let element of taxElements">
          <li *ngIf="!isArrayItemElement(element)" class="mat-body-3">
            <ice-element [section]="section" [elementName]="element"></ice-element>
          </li>
          <ng-container *ngIf="isArrayItemElement(element)">
            <li *ngFor="let item of getArrayItems(element)" class="mat-body-3">
              <ice-element
                *ngIf="item.isVisible"
                [section]="section"
                [elementName]="element"
                [index]="item.index"
              >
              </ice-element>
            </li>
          </ng-container>
        </ng-container>
      </ul>
    </div>
    <div *ngIf="discountElements.length > 0" class="insis-summary-section-detail-container">
      <h3 class="mat-body-2">{{ getLabel(discountsAndLoadingsCategoryTitleResourceKey) }}</h3>
      <ul>
        <ng-container *ngFor="let element of discountElements">
          <li *ngIf="!isArrayItemElement(element)" class="mat-body-3">
            <ice-element [section]="section" [elementName]="element"></ice-element>
          </li>
          <ng-container *ngIf="isArrayItemElement(element)">
            <li *ngFor="let item of getArrayItems(element)" class="mat-body-3">
              <ice-element
                *ngIf="item.isVisible"
                [section]="section"
                [elementName]="element"
                [index]="item.index"
              >
              </ice-element>
            </li>
          </ng-container>
        </ng-container>
      </ul>
    </div>
  </div>
</details>

<ng-container *ngIf="isPopup">
  <button class="hide-show-button" (click)="toggleVisibility()">
    <mat-icon>
      {{ !isVisible ? 'attach_money' : 'close' }}
    </mat-icon>
  </button>
</ng-container>
