implementations:
  InsisDefaultTransformationRule:
    description: >
      This rule is the almost the same as DefaultTransformationRule with a small addition, fromIndex and toIndex to be
      from an element's value.

    params:
      extends:
        label: Extends
        info: the integration this extends
        type: integration
      additional:
        label: Additional
        info: if an element has a ValuesRule this additional is used
      dateFormat:
        label: Date format
        info: e.g. YYYY-MM-DD, can use any moment.js format string
      dateTimeFormat:
        label: DateTime format
        info: e.g. YYYY-MM-DDThh:mm:ss, can use any moment.js format string
      ignoreNull:
        label: Ignore null values (out)
        type: boolean
      out:
        label: Out Data
        type: icel
        params:
          fromIdx:
            label: fromIdx
            params:
              index:
                label: Index (literal)
              array:
                label: Array
              condition:
                label: Condition
          mappings:
            label: Mappings
            array: true
            params:
              value:
                label: Value
              element:
                label: Element
                type: element
              datastore:
                label: Datastore path
              principal:
                label: Principal data path
              payload:
                label: Payload path (target)
              params:
                label: Param name (target)
              other:
                label: Other path (target)
      in:
        label: In Data
        type: icel
        params:
          fromIdx:
            label: fromIdx
            params:
              index:
                label: Index (literal)
              array:
                label: Array
              condition:
                label: Condition
              append:
                label: Append
                type: boolean
          mappings:
            label: Mappings
            array: true
            params:
              value:
                label: Value
              element:
                label: Element (target)
                type: element
              datastore:
                label: Datastore path (target)
              payload:
                label: Payload path
              params:
                label: Param name
              other:
                label: Other path

    icel: >
      # Example using element as fromIndex and toIndex

            ```
              InsisDefaultTransformationRule:
                    additional: insis
                    dateFormat: YYYY-MM-DD
                    dateTimeFormat: 'YYYY-MM-DDThh:mm:ss'
                    out:
                      - mappings:
                          - param: soapAction
                            value: findObject
                          - param: requestType
                            value: FindObjectRqType
                      - mappings:
                          - value: 3
                            payload: CustomOID.ObjectType
                      - fromIdx:
                          index: selected-vehicle-index
                        mappings:
                          - value: EQ
                            payload: CustomOID.FilterCriteria.FilterCriterion.attributes.operation
                          - element: policy.insured.vehicle-objects~car.regno
                            payload: CustomOID.FilterCriteria.FilterCriterion.attributes.value
                          - value: REG_NO
                            payload: CustomOID.FilterCriteria.FilterCriterion.attributes.field
                          - value: AND
                            payload: CustomOID.FilterCriteria.FilterCriterion.attributes.conjunction
                    in:
                      - toIdx:
                          array: datamodel.policy.insured.vehicle-objects
                          index: selected-vehicle-index
                        mappings:
                          - payload: 'Objects.Object.OCar.Chassis'
                            element: policy.insured.vehicle-objects~car.chassis
                          - payload: 'Objects.Object.OCar.RegNo'
                            element: policy.insured.vehicle-objects~car.regno
                          - payload: 'Objects.Object.OCar.Make'
                            element: policy.insured.vehicle-objects~car.brand
                          - payload: 'Objects.Object.OCar.Model'
                            element: policy.insured.vehicle-objects~car.model
                          - payload: 'Objects.Object.OCar.ProdYear'
                            element: policy.insured.vehicle-objects~car.construction-date
                          - payload: 'Objects.Object.OCar.CarSubtype'
                          - payload: 'Objects.Object.OCar.Engine'
                          - payload: 'Objects.Object.OCar.EnginePower'
                            element: policy.insured.vehicle-objects~car.engine-power
                          - payload: 'Objects.Object.OCar.FuelType'
                            element: policy.insured.vehicle-objects~car.fuel
                          - payload: 'Objects.Object.OCar.SeatsNum'
                            element: policy.insured.vehicle-objects~car.seats-number
                          - payload: 'Objects.Object.OCar.CarUsage'
                            element: policy.insured.vehicle-objects~car.usage
                    ignoreNull: true
            ```
