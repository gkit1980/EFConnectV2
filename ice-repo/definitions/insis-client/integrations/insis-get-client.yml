integration:
  exchange:
    SoapCallExchangeRule:
      endpoint: insis_pdm_endpoint
      securityMode: UsernamePassword
      username: 'env:insis-username'
      password: 'env:insis-password'
      ignoreNamespaces: 'env:insis-ignoreNamespaces'
      soapAction: findPersonByPID
      requestType: FndPersonByPIDRqType
      jsonSchema: InsisPDM
      responseType: FndPersonByPIDRsType
  transformation:
    DefaultTransformationRule:
      additional: insis
      dateFormat: YYYY-MM-DD
      dateTimeFormat: 'YYYY-MM-DDThh:mm:ss'
      out:
        - mappings:
            - param: soapAction
              value: findPersonByPID
            - param: requestType
              value: FndPersonByPIDRqType
        - mappings:
            - dynid: true
              payload: PID
            - element: client.personal-data.pid
              payload: PID
      in:
        - mappings:
            - element: client.personal-data.pid
              payload: Entity.PersonalData.PID
            - element: client.personal-data.corporate_status
              payload: ClientData.OfficialStatus
            - element: client.personal-data.date-of-birth
              payload: Entity.PersonalData.BirthDate
            - element: client.personal-data.first-name
              payload: Entity.PersonalData.Name.Given
            - element: client.personal-data.gender
              payload: Entity.PersonalData.Gender
            - element: client.personal-data.home-country
              payload: Entity.PersonalData.HomeCountry
            - element: client.personal-data.language
              payload: Entity.PersonalData.Language
            - element: client.personal-data.last-name
              payload: Entity.PersonalData.Name.Family
            - element: client.personal-data.manid
              payload: Entity.ManID
            - element: client.personal-data.nationality
              payload: Entity.Nationality
            - element: client.personal-data.notes
              payload: Entity.PersonalData.Notes
        - fromIdx:
            array: payload.Addresses.Address
          toIdx:
            array: datamodel.client.personal-data.addresses
            append: true
          mappings:
            - element: client.personal-data.addresses~address-id
              payload: 'Addresses.Address[n].AddressID'
            - element: client.personal-data.addresses~address-type
              payload: 'Addresses.Address[n].AddressType'
            - element: client.personal-data.addresses~address
              payload: 'Addresses.Address[n].Address'
            - element: client.personal-data.addresses~city
              payload: 'Addresses.Address[n].City'
            - element: client.personal-data.addresses~country
              payload: 'Addresses.Address[n].Country'
            - element: client.personal-data.addresses~region
              payload: 'Addresses.Address[n].Region'
            - element: client.personal-data.addresses~street-number
              payload: 'Addresses.Address[n].ResidentialAddress.StreetNo'
            - element: client.personal-data.addresses~street
              payload: 'Addresses.Address[n].ResidentialAddress.StreetName'
            - element: client.personal-data.addresses~zip
              payload: 'Addresses.Address[n].ZipCode'
            - element: client.personal-data.addresses~is-primary
              payload: 'Addresses.Address[n].PrimaryFlag'
            - element: client.personal-data.addresses~is-invoice
              payload: 'Addresses.Address[n].InvoiceYN'
            - element: client.personal-data.addresses~is-mail
              payload: 'Addresses.Address[n].MailYN'
        - fromIdx:
            array: payload.BankAccounts.BankAccount
          toIdx:
            array: datamodel.client.personal-data.bank-account
            append: true
          mappings:
            - element: client.personal-data.bank-account~bank-id
              payload: 'BankAccounts.BankAccount[n].BankAccID'
            - element: client.personal-data.bank-account~bankpid
              payload: 'BankAccounts.BankAccount[n].BankPID'
            - element: client.personal-data.bank-account~currency
              payload: 'BankAccounts.BankAccount[n].Currency'
            - element: client.personal-data.bank-account~iban
              payload: 'BankAccounts.BankAccount[n].AccountNo'
            - element: client.personal-data.bank-account~name
              payload: 'BankAccounts.BankAccount[n].BankName'
        - fromIdx:
            array: payload.Contacts.Contact
          toIdx:
            array: datamodel.client.personal-data.contacts
            append: true
          mappings:
            - element: client.personal-data.contacts~contact-id
              payload: 'Contacts.Contact[n].ContactID'
            - element: client.personal-data.contacts~details
              payload: 'Contacts.Contact[n].Details'
            - element: client.personal-data.contacts~type
              payload: 'Contacts.Contact[n].Type'
