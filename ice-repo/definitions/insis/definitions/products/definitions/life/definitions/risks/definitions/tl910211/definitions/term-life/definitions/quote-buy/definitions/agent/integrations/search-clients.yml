integration:
  exchange:
    InsisRestCallExchangeRule:
      endpointBaseurl: 'insis-rest-endpoint'
      verb: get
      url: '/people-dir/person/?startRow=0&rowCount=10&name=${NAME ? NAME : ""}&egn=${PID ? PID : ""}'

  transformation:
    DefaultTransformationRule:
      additional: insis
      dateFormat: YYYY-MM-DD
      out:
        - mappings:
            - param: NAME
              element: client.search.name
            - param: PID
              element: client.search.pid
      in:
        - fromIdx:
            array: payload.RowSet
            condition: 1 == 1
          toIdx:
            array: datamodel.client.list
            append: true
          mappings:
            - payload: 'RowSet[n].name'
              element: client.list~name

            - payload: 'RowSet[n].gname'
              element: client.list~first-name

            - payload: 'RowSet[n].fname'
              element: client.list~last-name

            - payload: 'RowSet[n].birthDate'
              element: client.list~birthdate

            - payload: 'RowSet[n].egn'
              element: client.list~pid

            - payload: 'RowSet[n].sex'
              element: client.list~gender

            - payload: 'RowSet[n].homeCountry'
              element: client.list~country-code

            - payload: 'RowSet[n].manId'
              element: client.list~man-id

            - value: false
              element: client.list~selected
