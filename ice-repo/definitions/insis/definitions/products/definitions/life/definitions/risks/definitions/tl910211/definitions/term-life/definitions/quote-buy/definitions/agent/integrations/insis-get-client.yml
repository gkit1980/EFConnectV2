integration:
  exchange:
    SoapCallExchangeRule:
      endpoint: insis_pdm_endpoint
      securityMode: UsernamePassword
      username: 'env:insis-username'
      password: 'env:insis-password'
      ignoreNamespaces: 'env:insis-ignoreNamespaces'
      soapAction: findPersonByPID
      requestType: FndPersonByPIDRqType
      jsonSchema: InsisPDM
      responseType: FndPersonByPIDRsType
  transformation:
    DefaultTransformationRule:
      additional: insis
      dateFormat: YYYY-MM-DD
      dateTimeFormat: 'YYYY-MM-DDThh:mm:ss'
      out:
        - mappings:
            - param: soapAction
              value: findPersonByPID
            - param: requestType
              value: FndPersonByPIDRqType
        - mappings:
            - element: policy.participants.holder.person.pid
              payload: PID
      in:
        - fromIdx:
            index: '[0]'
          toIdx:
            array: datamodel.policy.insured.person-objects
            append: false
            condition: 1 == 1
          mappings:
            - element: policy.insured.person-objects~person.first-name
              payload: Entity.PersonalData.Name.Given
            - element: policy.insured.person-objects~person.last-name
              payload: Entity.PersonalData.Name.Family
            - element: policy.insured.person-objects~person.gender
              payload: Entity.PersonalData.Gender
            - element: policy.insured.person-objects~person.date-of-birth
              payload: Entity.PersonalData.BirthDate
            - element: policy.insured.person-objects~person.address.country
              payload: Entity.PersonalData.HomeCountry
        - mappings:
            - element: policy.participants.holder.person.corporate_status
              payload: ClientData.OfficialStatus
            - element: policy.participants.holder.person.date-of-birth
              payload: Entity.PersonalData.BirthDate
            - element: policy.participants.holder.person.first-name
              payload: Entity.PersonalData.Name.Given
            - element: policy.participants.holder.person.gender
              payload: Entity.PersonalData.Gender
            - element: policy.participants.holder.person.home-country
              payload: Entity.PersonalData.HomeCountry
            - element: policy.participants.holder.person.language
              payload: Entity.PersonalData.Language
            - element: policy.participants.holder.person.last-name
              payload: Entity.PersonalData.Name.Family
            - element: policy.participants.holder.person.manid
              payload: Entity.ManID
            - element: policy.participants.holder.person.nationality
              payload: Entity.Nationality
            - element: policy.participants.holder.person.notes
              payload: Entity.PersonalData.Notes
