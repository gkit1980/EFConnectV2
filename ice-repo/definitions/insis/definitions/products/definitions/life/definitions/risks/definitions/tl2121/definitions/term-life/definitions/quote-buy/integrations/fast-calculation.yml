integration:
  exchange:
    InsisRulesRestExchangeRule:
      endpointBaseurl: "insis-rest-endpoint"
      verb: post
      url: "/util/generic/rules"
  transformation:
    DefaultTransformationRule:
      dateFormat: DD-MM-YYYY
      additional: insis
      out:
        - mappings:
            - payload: params.BEGIN
              element: policy.contract.begin

            - payload: params.K
              element: policy.contract.payment.frequency

            - payload: params.N
              element: policy.contract.term.duration

            - payload: params.M
              element: policy.contract.payment.term.duration

            - payload: params.DECR
              element: policy.contract.custom.decrease-type

            - payload: params.INT
              element: policy.contract.custom.interest-rate

        - fromIdx:
            index: "[0]"
          mappings:
            - payload: params.SA
              element: policy.insured.person-objects~cover.death-any.insured-amount

        - fromIdx:
            array: datamodel.policy.insured.person-objects
          toIdx:
            useSourceIndex: true
          mappings:
            - payload: rules[n].ruleRef
              value: GET_RATE_PARAM_DEC_TERM

            - payload: rules[n].params.BDATE
              element: policy.insured.person-objects~person.date-of-birth

            - payload: rules[n].params.SMOK
              element: policy.insured.person-objects~question.q-04

            - payload: rules[n].params.X
              element: policy.insured.person-objects~person.age-at-begin

      in:
        - fromIdx:
            array: payload.rules
          toIdx:
            useSourceIndex: true
          mappings:
            - element: policy.insured.person-objects~cover.death-any.premium
              payload: rules[n].outputParams.PREM
