integration:
  exchange:
    InsisSoapCallExchangeRule:
      endpoint: insis_pam_endpoint
      securityMode: UsernamePassword
      username: insis-username
      password: insis-password
      ignoreNamespaces: insis-ignoreNamespaces
      soapAction: registerEngagementQuote
      jsonSchema: InsisPAM
  transformation:
    DefaultTransformationRule:
      additional: insis
      dateFormat: YYYY-MM-DD
      dateTimeFormat: 'YYYY-MM-DDThh:mm:ss'
      extends: 910211.risks.life.insis-engagement-quote.save
      in:
        - element: policy.participants.holder.person.engagement-id
          payload: EngagementID
      out:
        - mappings:
            - param: soapAction
              value: registerEngagementQuote
            - param: requestType
              value: RegisterEngagementQuoteRqType
            - param: responseType
              value: RegisterEngagementQuoteRsType
        - fromIdx:
            array: datamodel.policy.insured.person-objects
          toIdx:
            useSourceIndex: true
          mappings:
            - element: policy.insured.person-objects~entity-accident-insured.type
              payload: >-
                Policies.Policy[0].Insureds.Insured[n].InsuredEntity.OAccidentInsured.AccinsType
        - mappings:
            - value: null
              payload: 'Policies.Policy[0].InsuranceConditions.PolicyNo'
        - fromIdx:
            array: datamodel.policy.insured.person-objects
          toIdx:
            useSourceIndex: true
          mappings:
            - payload: 'Policies.Policy[0].Insureds.Insured[n].InsuredObjectID'
              value: '-1'
            - payload: 'Policies.Policy[0].Insureds.Insured[n].InsuredEntity.ObjectID'
              value: '-1'
