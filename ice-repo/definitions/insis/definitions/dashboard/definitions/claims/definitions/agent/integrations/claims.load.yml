integration:
  exchange:
    InsisRestPQCallExchangeRule:
      endpointBaseurl: 'insis-rest-endpoint'
      verb: post
      url: '/util/query/paginated-query'
    # InsisDBExchangeRule:
    #   connectString: 'env:insis-db-url'
    #   username: 'env:insis-db-username'
    #   password: 'env:insis-db-password'
    #   queryFileURL: data/claims.agent.get.sql
    #   queryType: JSON
  transformation:
    DefaultTransformationRule:
      dateFormat: YYYY-MM-DD
      out:
        - mappings:
            - param: queryId
              value: claims.agent.get
            - param: client_pid
              element: search.cases.client-id
            - param: client_name
              element: search.cases.client-name
            - param: event_date_from
              element: search.cases.event.date-from
            - param: event_date_to
              element: search.cases.event.date-to
            - param: event_type
              element: search.cases.event.type
            - param: claim_status
              element: search.cases.claim.status
            - param: claim_date_from
              element: search.cases.claim.date-from
            - param: claim_date_to
              element: search.cases.claim.date-to
            - param: p_fulltext
              element: search.cases.fulltext
            - param: policy_no
              element: search.cases.policy-no
            - param: product_id
              element: search.cases.product-id
            - param: claim_no
              element: search.cases.claim.number
            - param: page_size
              datastore: pagination.claims.page-size
            - param: offset
              datastore: pagination.claims.offset
      in:
        - fromIdx:
            array: payload.rows
          toIdx:
            useSourceIndex: true
          mappings:
            - payload: 'rows[n].claim_id'
              element: cases~id
            - payload: 'rows[n].claim_state_name'
              element: cases~claim-state
            - payload: 'rows[n].event_date'
              element: cases~event-date
            - payload: 'rows[n].event_type_name'
              element: cases~event-type
            - payload: 'rows[n].registration_date'
              element: cases~claim-date
            - payload: 'rows[n].client_id'
              element: cases~client-pid
            - payload: 'rows[n].client_name'
              element: cases~client-name
            - payload: 'rows[n].client_type'
              element: cases~client-type
            - payload: 'rows[n].policy_id'
              element: cases~policy-id
            - payload: 'rows[n].insr_type'
              element: cases~insr-type
            - payload: 'rows[n].insr_type_name'
              element: cases~insr-type-name
            - payload: 'rows[n].total'
              datastore: 'pagination.claims.results-length'
