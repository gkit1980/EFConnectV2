integration:
  exchange:
    InsisRestPQCallExchangeRule:
      endpointBaseurl: 'insis-rest-endpoint'
      verb: post
      url: '/util/query/paginated-query'
  transformation:
    DefaultTransformationRule:
      dateFormat: YYYY-MM-DD
      out:
        - mappings:
            - param: queryId
              value: policies.get
            - param: policy_name
              element: claim.policy.search-criteria
            - if: >-
                datamodel.claim.policy.search != null &&
                datamodel.claim.policy.search-criteria == null
              param: policy_name
              element: claim.policy.search
            - param: policy_id
              value: null
            - param: policy_no
              value: null
            - param: insr_type
              value: null
            - param: policy_state
              value: null
            - param: p_insr_end
              value: null
            - param: p_client_name
              value: null
            - param: p_fulltext
              value: null
            - param: p_client_pid
              element: claim.client.id
            - param: p_insured_object
              value: null
            - param: page_size
              value: 20
            - param: offset
              value: 0
      in:
        - fromIdx:
            array: payload.rows
          toIdx:
            array: datamodel.policies
            useSourceIndex: true
          mappings:
            - payload: 'rows[n].fnol_policy_display'
              datastore: 'policies[n].displayTerm'
            - payload: 'rows[n].policy_id'
              datastore: 'policies[n].value'
            - payload: 'rows[n].policy_state'
              datastore: 'policies[n].policy-state'
            - payload: 'rows[n].policy_id'
              datastore: 'policies[n].policy-id'
            - payload: 'rows[n].policy_no'
              datastore: 'policies[n].policy-no'
            - payload: 'rows[n].policy_name'
              datastore: 'policies[n].policy-name'
            - payload: 'rows[n].insr_type'
              datastore: 'policies[n].insr-type'
            - payload: 'rows[n].product-name'
              datastore: 'policies[n].product-name'
            - payload: 'rows[n].package_code'
              datastore: 'policies[n].package-code'
            - payload: 'rows[n].policy_state_name'
              datastore: 'policies[n].policy-state-name'
            - payload: 'rows[n].man_id'
              datastore: 'policies[n].client-man-id'
            - payload: 'rows[n].pid'
              datastore: 'policies[n].client-pid'
            - payload: 'rows[n].client_name'
              datastore: 'policies[n].client-name'
            - payload: 'rows[n].product_name'
              datastore: 'policies[n].product-name'
            - payload: 'rows[n].insr_type'
              datastore: 'policies[n].insr-type'
            - payload: 'rows[n].policy_state'
              element: policies~policy-state
            - payload: 'rows[n].policy_id'
              element: policies~policy-id
            - payload: 'rows[n].policy_no'
              element: policies~policy-no
            - payload: 'rows[n].policy_name'
              element: policies~policy-name
            - payload: 'rows[n].insr_type'
              element: policies~insr-type
            - payload: 'rows[n].product-name'
              element: policies~product-name
            - payload: 'rows[n].package_code'
              element: policies~package-code
            - payload: 'rows[n].policy_state_name'
              element: policies~policy-state-name
            - payload: 'rows[n].man_id'
              element: policies~client-man-id
            - payload: 'rows[n].pid'
              element: policies~client-pid
            - payload: 'rows[n].client_name'
              element: policies~client-name
            - payload: 'rows[n].product_name'
              element: policies~product-name
            - payload: 'rows[n].insr_type'
              element: policies~insr-type
