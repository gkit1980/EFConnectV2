transpilation:
  exchange:
    - InsisProductConfigRestExchangeRule:
        endpointBaseurl: insis-transpilation-endpoint
        url: '/product/${productcode}'
    - InsisProductConfigRestExchangeRule:
        endpointBaseurl: insis-transpilation-endpoint
        url: '/quest-def-collection'
    - InsisProductConfigRestExchangeRule:
        endpointBaseurl: insis-transpilation-endpoint
        url: '/cover-package-collection'
    - InsisProductConfigRestExchangeRule:
        endpointBaseurl: insis-transpilation-endpoint
        url: '/product-collection'
    - InsisProductConfigRestExchangeRule:
        endpointBaseurl: insis-transpilation-endpoint
        url: '/object-collection'
    - InsisProductConfigRestExchangeRule:
        endpointBaseurl: insis-transpilation-endpoint
        url: '/document-collection'
  transpile:
    InsisProductTranspileRule:
      useIdForName: true
      out:
        - mappings:
          - param: productcode
            value: 920201
          - param: parent-definition
            value: 'products'
          - param: lob
            value: property
          - param: useVersion
            value: '1.00'
      in:
        - fromIdx:
            source: ProductConfiguration.Versions[0].Version
            condition: Version[0] == '1.00'
          mappings:
            - element: policy.contract.product-code
              source: ProductConfiguration.ProductCode[0]
            - questions:
                source: ProductConfiguration.Versions[0].Version[n].Questions[0].Question
                namePrefix: policy.contract.questions
            - documents:
                source: ProductConfiguration.Versions[0].Version[n].Documents[0].Document
                namePrefix: policy.contract.document
        - fromIdx:
            source: ProductConfiguration.Versions[0].Version
            condition: Version[0] == '1.00'
            fromIdx:
              source: Objects[0].Object
              condition: ObjectType[0] == '4'
          mappings:
            - element: policy.insured.property-objects~entity-type
              source: ProductConfiguration.Versions[0].Version[n].Objects[0].Object[n].ObjectType[0]
            - questions:
                source: ProductConfiguration.Versions[0].Version[n].Objects[0].Object[n].Questions[0].Question
                namePrefix: policy.insured.property-objects~questions
            - covers:
                source: ProductConfiguration.Versions[0].Version[n].Objects[0].Object[n].Covers[0].Cover
                namePrefix: policy.insured.property-objects~cover
            - documents:
                source: ProductConfiguration.Versions[0].Version[n].Objects[0].Object[n].Documents[0].Document
                namePrefix: policy.insured.property-objects~document
        - fromIdx:
            source: Repository.Entities[0].ObjectCollection[0].Object
            condition: ObjectType[0] == '4'
          mappings:
            - objectSubTypes: 
                source: Repository.Entities[0].ObjectCollection[0].Object[n]
                namePrefix: policy.insured.property-objects~entity
            - usedDefinedFields: 
                source: Repository.Entities[0].ObjectCollection[0].Object[n]
                namePrefix: policy.insured.property-objects~
        - fromIdx:
            source: ProductConfiguration.Versions[0].Version
            condition: Version[0] == '1.00'
            fromIdx:
              source: Objects[0].Object
              condition: ObjectType[0] == '9'
          mappings:
            - element: policy.insured.liability-objects~entity-type
              source: ProductConfiguration.Versions[0].Version[n].Objects[0].Object[n].ObjectType[0]
            - questions:
                source: ProductConfiguration.Versions[0].Version[n].Objects[0].Object[n].Questions[0].Question
                namePrefix: policy.insured.liability-objects~questions
            - covers:
                source: ProductConfiguration.Versions[0].Version[n].Objects[0].Object[n].Covers[0].Cover
                namePrefix: policy.insured.liability-objects~cover
            - documents:
                source: ProductConfiguration.Versions[0].Version[n].Objects[0].Object[n].Documents[0].Document
                namePrefix: policy.insured.liability-objects~document
        - fromIdx:
            source: Repository.Entities[0].ObjectCollection[0].Object
            condition: ObjectType[0] == '9'
          mappings:
            - objectSubTypes: 
                source: Repository.Entities[0].ObjectCollection[0].Object[n]
                namePrefix: policy.insured.liability-objects~entity
        - fromIdx:
            source: ProductConfiguration.Versions[0].Version
            condition: Version[0] == '1.00'
            fromIdx:
              source: Objects[0].Object
              condition: ObjectType[0] == '118'
          mappings:
            - element: policy.insured.person-objects~entity-type
              source: ProductConfiguration.Versions[0].Version[n].Objects[0].Object[n].ObjectType[0]
            - questions:
                source: ProductConfiguration.Versions[0].Version[n].Objects[0].Object[n].Questions[0].Question
                namePrefix: policy.insured.person-objects~questions
            - covers:
                source: ProductConfiguration.Versions[0].Version[n].Objects[0].Object[n].Covers[0].Cover
                namePrefix: policy.insured.person-objects~cover
            - documents:
                source: ProductConfiguration.Versions[0].Version[n].Objects[0].Object[n].Documents[0].Document
                namePrefix: policy.insured.person-objects~document
        - fromIdx:
            source: Repository.Entities[0].ObjectCollection[0].Object
            condition: ObjectType[0] == '118'
          mappings:
            - objectSubTypes: 
                source: Repository.Entities[0].ObjectCollection[0].Object[n]
                namePrefix: policy.insured.person-objects~entity
            - usedDefinedFields: 
                source: Repository.Entities[0].ObjectCollection[0].Object[n]
                namePrefix: policy.insured.person-objects~
